<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>promise</title>
  </head>
  <body>
    <h2>promiseall</h2>

    <script>
      //promiseall 在遇到其中一个有错误时，就会停止执行任务

      // 代码 解决：在catch里面resolve就行了
      // 测试了下 解决方式还能实现
      var p1 = new Promise((resolve) => {
        let p1Data = b;
        resolve(p1Data);
      }).catch((err) => {
        return Promise.resolve("P1 无数据");
      });

      var p2 = new Promise((resolve) => {
        let p2Data = "p2的有数据";
        resolve(p2Data);
      }).catch((err) => {
        return Promise.resolve("P2 无数据");
      });

      Promise.all([p1, p2])
        .then((res) => {
          console.log(res);
        })
        .catch((err) => {
          throw new Error("Promise 执行错误", err);
        });
    </script>
  </body>
</html>
